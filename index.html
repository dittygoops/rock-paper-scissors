<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <button class="rock">Rock</button>
        <button class="paper">Paper</button>
        <button class="scissors">Scissors</button>
    </div>
    
    <div>
        <div>
            <p>You Chose:</p>
            <p class="player-choice"></p>
        </div>
        <div>
            <p>Computer Chose:</p>
            <p class="computer-choice"></p>
        </div>
    </div>

    <div>
        <p class="message"></p>
    </div>

    <div>
        <div>
            <p>Player Score:</p>
            <p class="player-score">0</p>
        </div>

        <div>
            <p>Computer Score:</p>
            <p class="computer-score">0</p>
        </div>
    </div>

    <div>
        <p class="final-message"></p>
    </div>

    <script>
        function setPlayerChoice() {   
            choice = this.className;
            game();
        }

        let choice = null;

        const btns = document.querySelectorAll('button');
        const message = document.querySelector('.message');
        const playerScore = document.querySelector('.player-score');
        const computerScore = document.querySelector('.computer-score');
        const playerChoice = document.querySelector('.player-choice');
        const computerChoice = document.querySelector('.computer-choice');
        const finalMessage = document.querySelector('.final-message');
        btns.forEach(btn => btn.addEventListener('click', setPlayerChoice));

        function getPlayerChoice() {
            return choice;
        }

        function getComputerChoice() {
            const randNum = Math.floor(Math.random() * 3 + 1);
            switch (randNum) {
                case 1:
                    return 'rock';
                    break;
                case 2:
                    return 'paper';
                    break;
                case 3:
                    return 'scissors';
                    break;
            }
        }

        function playRound() {
            playerChoice.innerText = getPlayerChoice();
            computerChoice.innerText = getComputerChoice();

            const results = [
                [0, -1, 1],
                [1, 0, -1],
                [-1, 1, 0]
            ];

            let playerChoiceNum = null;

            switch (playerChoice.innerText) {
                case 'rock':
                    playerChoiceNum = 0;
                    break;
                case 'paper':
                    playerChoiceNum = 1;
                    break;
                case 'scissors':
                    playerChoiceNum = 2;
                    break;
            }

            let computerChoiceNum = null;
            
            switch (computerChoice.innerText) {
                case 'rock':
                    computerChoiceNum = 0;
                    break;
                case 'paper':
                    computerChoiceNum = 1;
                    break;
                case 'scissors':
                    computerChoiceNum = 2;
                    break;
            }

            return results[playerChoiceNum][computerChoiceNum];
        }
    
        function game() {
            const result = playRound();
            console.log(result);

            switch (result) {
                case 1:
                    message.innerText = "You Won!";
                    playerScore.innerText = parseInt(playerScore.innerText) + 1;
                    break;
                case 0:
                    message.innerText = "Tie";
                    break;
                case -1:
                    message.innerText = "You Lost!";
                    computerScore.innerText = parseInt(computerScore.innerText) + 1;
                    break;
            }

            check();
        }

        function check() {
            if (parseInt(playerScore.innerText) === 5 || parseInt(computerScore.innerText) === 5) {
                endGame();
            }
        }

        function endGame() {
            btns.forEach(btn => btn.disabled = true);
            parseInt(playerScore.innerText) === 5 ? 
                finalMessage.innerText = 'Player was first to 5!' :
                finalMessage.innerText = 'Computer was first to 5!';
        }
    </script>
</body>
</html>